/**
 * ChurchTools Suite - Modernized List Views CSS
 * 
 * Features:
 * - BEM naming convention
 * - CSS Grid layout
 * - CSS Custom Properties (Spacing, Colors, Sizing)
 * - Container Queries (with Media Query fallback)
 * - Modern CSS: clamp(), gap, grid-template-areas
 *
 * @package ChurchTools_Suite
 * @since   0.10.5.0
 * @version 2.0.0
 */

/* ========================================================================
   CSS Custom Properties (Variables)
   ======================================================================== */

.cts-list--classic {
	/* Spacing */
	--cts-list-spacing: clamp(0.5rem, 2vw, 1rem);
	--cts-list-gap: clamp(0.75rem, 2vw, 1.25rem);
	--cts-list-padding: clamp(0.75rem, 2vw, 1rem);
	
	/* Sizing */
	--cts-date-box-size: clamp(60px, 10vw, 80px);
	--cts-time-width: clamp(100px, 15vw, 140px);
	--cts-calendar-width: clamp(100px, 12vw, 120px);
	--cts-services-width: clamp(180px, 20vw, 280px);
	--cts-location-width: clamp(120px, 15vw, 180px);
	
	/* Typography */
	--cts-font-size-base: clamp(0.875rem, 1.5vw, 1rem);
	--cts-font-size-small: clamp(0.75rem, 1.2vw, 0.875rem);
	--cts-font-size-title: clamp(0.9375rem, 1.8vw, 1.0625rem);
	
	/* Colors (can be overridden by theme or custom styles) */
	--cts-color-primary: var(--wp--preset--color--primary, #2563eb);
	--cts-color-text: var(--wp--preset--color--contrast, #1e293b);
	--cts-color-text-light: var(--wp--preset--color--secondary, #64748b);
	--cts-color-border: rgba(0, 0, 0, 0.08);
	--cts-color-hover: var(--wp--preset--color--tertiary, #f8fafc);
	
	/* Effects */
	--cts-border-radius: clamp(4px, 1vw, 8px);
	--cts-box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
	--cts-transition: all 0.2s ease-in-out;
}

/* ========================================================================
   List Container
   ======================================================================== */

.cts-list--classic {
	container-type: inline-size;
	container-name: cts-list;
	background: var(--cts-bg-color, #ffffff);
	border-radius: var(--cts-border-radius);
	box-shadow: var(--cts-box-shadow);
	overflow: hidden;
	font-size: var(--cts-font-size-base);
	color: var(--cts-color-text);
	line-height: 1.6;
}

/* ========================================================================
   Empty State
   ======================================================================== */

.cts-list__empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: var(--cts-list-spacing);
	padding: calc(var(--cts-list-padding) * 3);
	text-align: center;
}

.cts-list__empty-icon {
	font-size: clamp(2rem, 5vw, 3rem);
	opacity: 0.3;
}

.ct-list__empty-title {
	margin: 0;
	font-size: var(--cts-font-size-title);
	font-weight: 600;
	color: var(--cts-color-text);
}

.cts-list__empty-text {
	margin: 0;
	font-size: var(--cts-font-size-small);
	color: var(--cts-color-text-light);
}

/* ========================================================================
   Month Separator
   ======================================================================== */

.cts-list__month-separator {
	padding: calc(var(--cts-list-padding) * 1.5) var(--cts-list-padding) calc(var(--cts-list-padding) * 0.75);
	margin-block-start: var(--cts-list-spacing);
	border-block-start: 2px solid #e5e7eb;
	background: linear-gradient(to bottom, #f9fafb 0%, transparent 100%);
}

.cts-list__month-separator:first-child {
	margin-block-start: 0;
	border-block-start: none;
}

.cts-list__month-name {
	font-size: var(--cts-font-size-small);
	font-weight: 600;
	color: var(--cts-color-text);
	opacity: 0.8;
	text-transform: uppercase;
	letter-spacing: 0.05em;
}

/* ========================================================================
   List Item (CSS Grid Layout)
   ======================================================================== */

.cts-list__item {
	display: grid;
	grid-template-columns: 
		var(--cts-date-box-size)
		var(--cts-time-width)
		auto
		var(--cts-services-width)
		var(--cts-location-width);
	grid-template-areas: 
		"date time content services location";
	gap: var(--cts-list-gap);
	align-items: center;
	padding: var(--cts-list-padding);
	border-block-end: 1px solid var(--cts-color-border);
	transition: var(--cts-transition);
}

.cts-list__item:hover {
	background: var(--cts-color-hover);
}

.cts-list__item:last-child {
	border-block-end: none;
}

/* Clickable states */
.cts-list__item--clickable,
.cts-list__item--page-link {
	cursor: pointer;
}

.cts-list__item--clickable:focus-visible,
.cts-list__item--page-link:focus-visible {
	outline: 2px solid var(--cts-color-primary);
	outline-offset: -2px;
}

/* ========================================================================
   Date Box
   ======================================================================== */

.cts-list__date-box {
	grid-area: date;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 2px;
	inline-size: var(--cts-date-box-size);
	block-size: var(--cts-date-box-size);
	background: linear-gradient(135deg, #0a4b78 0%, #135e96 100%);
	color: #ffffff;
	border-radius: calc(var(--cts-border-radius) * 0.75);
	flex-shrink: 0;
	text-align: center;
}

.cts-list__date-month {
	font-size: 0.75em;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	opacity: 0.9;
}

.cts-list__date-day {
	font-size: 1.5em;
	font-weight: 700;
	line-height: 1;
}

.cts-list__date-weekday {
	font-size: 0.7em;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	opacity: 0.8;
}

/* ========================================================================
   Time
   ======================================================================== */

.cts-list__time {
	grid-area: time;
	font-size: var(--cts-font-size-small);
	font-weight: 500;
	color: var(--cts-color-text-light);
	white-space: nowrap;
}

.cts-list__time-separator {
	margin-inline: 0.25em;
}

/* ========================================================================
   Calendar Name
   ======================================================================== */

.cts-list__calendar {
	grid-area: calendar;
	font-size: var(--cts-font-size-small);
	font-weight: 600;
	color: var(--cts-color-primary);
	inline-size: var(--cts-calendar-width);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

/* ========================================================================
   Content (Title & Descriptions)
   ======================================================================== */

.cts-list__content {
	grid-area: content;
	min-inline-size: 0; /* Allow text truncation */
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
}

.cts-list__title {
	margin: 0;
	font-size: var(--cts-font-size-title);
	font-weight: 600;
	color: var(--cts-color-text);
	line-height: 1.4;
}

.cts-list__description {
	margin: 0;
	font-size: var(--cts-font-size-small);
	color: var(--cts-color-text-light);
	line-height: 1.4;
}

/* ========================================================================
   Services
   ======================================================================== */

.cts-list__services {
	grid-area: services;
	font-size: var(--cts-font-size-small);
	color: var(--cts-color-text-light);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.cts-list__services-more {
	font-weight: 600;
	color: var(--cts-color-primary);
	margin-inline-start: 0.25em;
}

/* ========================================================================
   Location
   ======================================================================== */

.cts-list__location {
	grid-area: location;
	display: flex;
	align-items: center;
	gap: 0.35rem;
	justify-content: flex-end;
	font-size: var(--cts-font-size-small);
	color: var(--cts-color-text-light);
}

.cts-list__location-icon {
	flex-shrink: 0;
	font-size: 1.1em;
	opacity: 0.7;
}

.cts-list__location-text {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.cts-list__location-info {
	display: inline-flex;
	align-items: center;
	padding: 0.125rem;
	background: none;
	border: none;
	cursor: help;
	color: inherit;
	opacity: 0.6;
	transition: opacity 0.2s;
}

.cts-list__location-info:hover {
	opacity: 1;
}

/* ========================================================================
   Tags
   ======================================================================== */

.cts-list__tags {
	grid-area: tags;
	display: flex;
	gap: 0.375rem;
	flex-wrap: wrap;
}

.cts-list__tag {
	display: inline-block;
	padding: 0.125rem 0.5rem;
	border-radius: calc(var(--cts-border-radius) * 1.5);
	font-size: 0.6875rem;
	font-weight: 500;
	color: #ffffff;
	background-color: #6b7280;
	white-space: nowrap;
	line-height: 1.4;
}

/* ========================================================================
   Layout Variations with Calendar Name or Tags
   ======================================================================== */

/* With calendar name: Add calendar column */
[data-show-calendar-name="1"] .cts-list__item {
	grid-template-columns: 
		var(--cts-date-box-size)
		var(--cts-time-width)
		var(--cts-calendar-width)
		auto
		var(--cts-services-width)
		var(--cts-location-width);
	grid-template-areas: 
		"date time calendar content services location";
}

/* With tags: Extend grid to include tags row */
[data-show-tags="1"] .cts-list__item {
	grid-template-rows: auto auto;
	grid-template-areas: 
		"date time content services location"
		"tags tags tags tags tags";
}

[data-show-calendar-name="1"][data-show-tags="1"] .cts-list__item {
	grid-template-areas: 
		"date time calendar content services location"
		"tags tags tags tags tags tags";
}

/* ========================================================================
   Container Queries (Modern Browsers)
   ======================================================================== */

/* Large containers (≥1000px): Default layout */
@container cts-list (min-width: 1000px) {
	.cts-list__item {
		/* Default grid (defined above) */
	}
}

/* Medium containers (600px - 999px): Hide services */
@container cts-list (width >= 600px) and (width < 1000px) {
	.cts-list__item {
		grid-template-columns: 
			var(--cts-date-box-size)
			var(--cts-time-width)
			auto
			var(--cts-location-width);
		grid-template-areas: 
			"date time content location";
	}
	
	[data-show-calendar-name="1"] .cts-list__item {
		grid-template-columns: 
			var(--cts-date-box-size)
			var(--cts-time-width)
			var(--cts-calendar-width)
			auto
			var(--cts-location-width);
		grid-template-areas: 
			"date time calendar content location";
	}
	
	.cts-list__services {
		display: none;
	}
}

/* Small containers (<600px): Stack layout */
@container cts-list (max-width: 599px) {
	.cts-list__item {
		grid-template-columns: auto 1fr;
		grid-template-areas: 
			"date content"
			"date location";
		gap: calc(var(--cts-list-gap) * 0.75);
		padding: calc(var(--cts-list-padding) * 0.875);
	}
	
	.cts-list__time,
	.cts-list__calendar,
	.cts-list__services {
		display: none;
	}
	
	.cts-list__location {
		justify-content: flex-start;
	}
	
	[data-show-tags="1"] .cts-list__item {
		grid-template-areas: 
			"date content"
			"date location"
			"tags tags";
	}
}

/* ========================================================================
   Fallback: Media Queries (for browsers without container query support)
   ======================================================================== */

@supports not (container-type: inline-size) {
	/* Medium screens (768px - 1023px) */
	@media (width >= 768px) and (width < 1024px) {
		.cts-list__item {
			grid-template-columns: 
				var(--cts-date-box-size)
				var(--cts-time-width)
				auto
				var(--cts-location-width);
			grid-template-areas: 
				"date time content location";
		}
		
		[data-show-calendar-name="1"] .cts-list__item {
			grid-template-columns: 
				var(--cts-date-box-size)
				var(--cts-time-width)
				var(--cts-calendar-width)
				auto
				var(--cts-location-width);
			grid-template-areas: 
				"date time calendar content location";
		}
		
		.cts-list__services {
			display: none;
		}
	}
	
	/* Small screens (<768px) */
	@media (max-width: 767px) {
		.cts-list__item {
			grid-template-columns: auto 1fr;
			grid-template-areas: 
				"date content"
				"date location";
			gap: calc(var(--cts-list-gap) * 0.75);
			padding: calc(var(--cts-list-padding) * 0.875);
		}
		
		.cts-list__time,
		.cts-list__calendar,
		.cts-list__services {
			display: none;
		}
		
		.cts-list__location {
			justify-content: flex-start;
		}
		
		[data-show-tags="1"] .cts-list__item {
			grid-template-areas: 
				"date content"
				"date location"
				"tags tags";
		}
	}
}

/* ========================================================================
   Print Styles
   ======================================================================== */

@media print {
	.cts-list--classic {
		box-shadow: none;
		border: 1px solid #ddd;
	}
	
	.cts-list__item {
		break-inside: avoid;
		page-break-inside: avoid;
	}
	
	.cts-list__item--clickable,
	.cts-list__item--page-link {
		cursor: default;
	}
	
	.cts-list__location-info {
		display: none;
	}
}

/* ========================================================================
   MODERN VIEW (Card Layout) - BEM Naming
   ======================================================================== */

/* Container (Grid) */
.cts-list--modern {
	container-type: inline-size;
	container-name: cts-list-modern;
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(clamp(260px, 30vw, 320px), 1fr));
	gap: clamp(1rem, 2.5vw, 1.5rem);
	background: transparent;
	
	/* Custom Properties for Cards */
	--modern-card-bg: var(--wp--preset--color--base, #ffffff);
	--modern-card-border: var(--wp--preset--color--contrast-2, #e2e8f0);
	--modern-card-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
	--modern-card-shadow-hover: 0 6px 20px rgba(0, 0, 0, 0.12);
	--modern-card-radius: clamp(8px, 1.5vw, 12px);
	--modern-badge-size: clamp(60px, 8vw, 80px);
	--modern-spacing: clamp(0.75rem, 2vw, 1.25rem);
}

/* Card Base */
.cts-list--modern__card {
	display: flex;
	flex-direction: column;
	background: var(--modern-card-bg);
	border: 1px solid var(--modern-card-border);
	border-radius: var(--modern-card-radius);
	box-shadow: var(--modern-card-shadow);
	overflow: hidden;
	transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Clickable Cards */
.cts-list--modern__card--clickable {
	cursor: pointer;
}

.cts-list--modern__card--clickable:hover,
.cts-list--modern__card--clickable:focus {
	transform: translateY(-4px);
	box-shadow: var(--modern-card-shadow-hover);
	outline: 2px solid var(--cts-color-primary);
	outline-offset: 2px;
}

/* Date Badge (Top Section with Color) */
.cts-list--modern__date-badge {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: var(--modern-spacing);
	background: var(--calendar-color, var(--cts-color-primary));
	color: #ffffff;
	text-align: center;
	min-height: var(--modern-badge-size);
}

.cts-list--modern__date-day {
	display: block;
	font-size: clamp(1.75rem, 4vw, 2.25rem);
	font-weight: 700;
	line-height: 1;
	margin-bottom: 0.25rem;
}

.cts-list--modern__date-month {
	display: block;
	font-size: clamp(0.75rem, 1.5vw, 0.875rem);
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	opacity: 0.9;
}

/* Card Content Area */
.cts-list--modern__content {
	display: flex;
	flex-direction: column;
	gap: clamp(0.5rem, 1.5vw, 0.75rem);
	padding: var(--modern-spacing);
	flex-grow: 1;
}

/* Calendar Name Badge */
.cts-list--modern__calendar {
	font-size: clamp(0.75rem, 1.2vw, 0.8125rem);
	font-weight: 600;
	color: var(--calendar-color, var(--cts-color-primary));
	text-transform: uppercase;
	letter-spacing: 0.05em;
}

/* Title */
.cts-list--modern__title {
	margin: 0;
	font-size: clamp(1rem, 2vw, 1.125rem);
	font-weight: 700;
	color: var(--cts-color-text);
	line-height: 1.3;
}

/* Time */
.cts-list--modern__time {
	display: flex;
	align-items: center;
	gap: 0.375rem;
	font-size: clamp(0.875rem, 1.5vw, 0.9375rem);
	color: var(--cts-color-text-light);
}

.cts-list--modern__time .dashicons {
	font-size: 1.125em;
}

/* Description */
.cts-list--modern__description {
	margin: 0;
	font-size: clamp(0.875rem, 1.5vw, 0.9375rem);
	line-height: 1.6;
	color: var(--cts-color-text-light);
}

.cts-list--modern__description--appointment {
	font-style: italic;
	opacity: 0.9;
}

/* Location */
.cts-list--modern__location {
	display: flex;
	align-items: center;
	gap: 0.375rem;
	font-size: clamp(0.8125rem, 1.4vw, 0.875rem);
	color: var(--cts-color-text-light);
}

.cts-list--modern__location .dashicons {
	font-size: 1.125em;
	flex-shrink: 0;
}

/* Services */
.cts-list--modern__services {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	margin-top: 0.25rem;
}

.cts-list--modern__service {
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
	padding: 0.5rem 0.75rem;
	background: var(--cts-color-hover);
	border-radius: clamp(4px, 0.8vw, 6px);
	border-left: 3px solid var(--calendar-color, var(--cts-color-primary));
}

.cts-list--modern__service-name {
	font-size: clamp(0.8125rem, 1.4vw, 0.875rem);
	font-weight: 600;
	color: var(--cts-color-text);
}

.cts-list--modern__service-person {
	font-size: clamp(0.75rem, 1.2vw, 0.8125rem);
	color: var(--cts-color-text-light);
}

/* Tags */
.cts-list--modern__tags {
	display: flex;
	flex-wrap: wrap;
	gap: 0.375rem;
	margin-top: 0.25rem;
}

.cts-list--modern__tag {
	display: inline-block;
	padding: 0.25rem 0.5rem;
	font-size: clamp(0.6875rem, 1.1vw, 0.75rem);
	font-weight: 500;
	color: #ffffff;
	background-color: #6b7280;
	border-radius: clamp(3px, 0.6vw, 4px);
	text-transform: uppercase;
	letter-spacing: 0.025em;
}

/* Empty State for Modern View */
.cts-list--modern .cts-list__empty-state {
	grid-column: 1 / -1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 1rem;
	padding: 3rem 1.5rem;
	text-align: center;
}

.cts-list--modern .cts-list__empty-state .dashicons {
	font-size: clamp(2.5rem, 6vw, 3rem);
	opacity: 0.25;
	color: var(--cts-color-text-light);
}

/* ========================================================================
   Container Queries for Modern View
   ======================================================================== */

/* Narrow containers: Single column */
@container cts-list-modern (max-width: 599px) {
	.cts-list--modern {
		grid-template-columns: 1fr;
	}
}

/* Medium containers: 2 columns */
@container cts-list-modern (min-width: 600px) and (max-width: 899px) {
	.cts-list--modern {
		grid-template-columns: repeat(2, 1fr);
	}
}

/* Wide containers: 3+ columns (default) */
@container cts-list-modern (min-width: 900px) {
	.cts-list--modern {
		grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
	}
}

/* ========================================================================
   Media Query Fallback for Legacy Browsers
   ======================================================================== */

@supports not (container-type: inline-size) {
	/* Mobile: Single column */
	@media (max-width: 767px) {
		.cts-list--modern {
			grid-template-columns: 1fr;
		}
	}
	
	/* Tablet: 2 columns */
	@media (min-width: 768px) and (max-width: 1023px) {
		.cts-list--modern {
			grid-template-columns: repeat(2, 1fr);
		}
	}
	
	/* Desktop: 3+ columns */
	@media (min-width: 1024px) {
		.cts-list--modern {
			grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
		}
	}
}

/* ========================================================================
   Print Styles for Modern View
   ======================================================================== */

@media print {
	.cts-list--modern {
		grid-template-columns: repeat(2, 1fr);
		gap: 1rem;
	}
	
	.cts-list--modern__card {
		break-inside: avoid;
		page-break-inside: avoid;
		box-shadow: none;
		border: 1px solid #ddd;
	}
	
	.cts-list--modern__card--clickable,
	.cts-list--modern__card--clickable:hover {
		transform: none;
		cursor: default;
	}
	
	.cts-list--modern__date-badge {
		print-color-adjust: exact;
		-webkit-print-color-adjust: exact;
	}
}

/* ========================================================================
   Modern Rows View (Compact Single-Line with Info Popup)
   ======================================================================== */

/**
 * Container with CSS Custom Properties
 */
.cts-list--modern-rows {
	/* Container Query for responsive behavior */
	container-type: inline-size;
	container-name: cts-list-modern-rows;
	
	display: flex;
	flex-direction: column;
	gap: clamp(0.5rem, 1.5vw, 0.75rem);
	
	/* Custom Properties */
	--modern-rows-bg: var(--wp--preset--color--base, transparent);
	--modern-rows-border: var(--wp--preset--color--contrast-2, #e5e7eb);
	--modern-rows-text: var(--wp--preset--color--contrast, #111827);
	--modern-rows-text-secondary: var(--wp--preset--color--contrast-3, #6b7280);
	--modern-rows-hover-bg: var(--wp--preset--color--contrast-1, #f9fafb);
	--modern-rows-link: var(--wp--preset--color--primary, #2563eb);
	--modern-rows-font-size: clamp(0.875rem, 1.5vw, 0.9375rem);
	--modern-rows-spacing: clamp(0.5rem, 1.5vw, 0.75rem);
	--modern-rows-border-radius: 6px;
}

/**
 * Month Separator
 */
.cts-list--modern-rows .cts-list__month-separator {
	margin: 1rem 0 0.5rem;
	padding-bottom: 0.375rem;
	border-bottom: 1px solid var(--modern-rows-border);
	font-size: clamp(0.9375rem, 2vw, 1.0625rem);
	font-weight: 700;
	color: var(--modern-rows-text);
}

.cts-list--modern-rows .cts-list__month-separator:first-child {
	margin-top: 0;
}

/**
 * Empty State
 */
.cts-list--modern-rows .cts-list__empty-state {
	padding: 2rem 1rem;
	text-align: center;
	color: var(--modern-rows-text-secondary);
	font-size: var(--modern-rows-font-size);
	background: var(--modern-rows-hover-bg);
	border-radius: var(--modern-rows-border-radius);
}

/**
 * Event Item (Single Line)
 */
.cts-list--modern-rows__item {
	position: relative;
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: var(--modern-rows-spacing);
	padding: var(--modern-rows-spacing);
	background: var(--modern-rows-bg);
	border: 1px solid var(--modern-rows-border);
	border-radius: var(--modern-rows-border-radius);
	transition: background-color 0.2s ease, border-color 0.2s ease;
	font-size: var(--modern-rows-font-size);
	line-height: 1.4;
}

.cts-list--modern-rows__item:hover {
	background: var(--modern-rows-hover-bg);
	border-color: var(--modern-rows-link);
}

/* Calendar color accent (left border) */
.cts-list--modern-rows__item::before {
	content: '';
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: 3px;
	background: var(--calendar-color, var(--modern-rows-link));
	border-radius: var(--modern-rows-border-radius) 0 0 var(--modern-rows-border-radius);
	opacity: 0;
	transition: opacity 0.2s ease;
}

.cts-list--modern-rows__item:hover::before {
	opacity: 1;
}

/* Clickable variant */
.cts-list--modern-rows__item--clickable {
	cursor: pointer;
}

.cts-list--modern-rows__item--clickable:focus-visible {
	outline: 2px solid var(--modern-rows-link);
	outline-offset: 2px;
}

/* Appointment badge (optional subtle indicator) */
.cts-list--modern-rows__item--appointment::after {
	content: 'T';
	position: absolute;
	top: 0.25rem;
	right: 0.25rem;
	width: 1.25rem;
	height: 1.25rem;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 0.625rem;
	font-weight: 700;
	color: var(--modern-rows-text-secondary);
	background: var(--modern-rows-hover-bg);
	border-radius: 50%;
	opacity: 0.6;
}

/**
 * Date (Inline, Compact)
 */
.cts-list--modern-rows__date {
	flex-shrink: 0;
	font-weight: 600;
	color: var(--modern-rows-text);
	white-space: nowrap;
	min-width: clamp(50px, 10vw, 65px);
}

/**
 * Time (Inline with Bullet Separator)
 */
.cts-list--modern-rows__time {
	flex-shrink: 0;
	color: var(--modern-rows-text-secondary);
	white-space: nowrap;
	font-size: calc(var(--modern-rows-font-size) * 0.95);
}

/**
 * Title (Inline, Bold)
 */
.cts-list--modern-rows__title {
	flex: 1 1 auto;
	min-width: 0;
	font-weight: 600;
	color: var(--modern-rows-text);
	word-wrap: break-word;
	hyphens: auto;
}

.cts-list--modern-rows__item--clickable .cts-list--modern-rows__title {
	color: var(--modern-rows-link);
	transition: text-decoration 0.2s ease;
}

.cts-list--modern-rows__item--clickable:hover .cts-list--modern-rows__title {
	text-decoration: underline;
}

/**
 * Info Icon Button
 */
.cts-list--modern-rows__info-icon {
	flex-shrink: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	width: 1.75rem;
	height: 1.75rem;
	padding: 0;
	margin: 0;
	background: transparent;
	border: 1px solid var(--modern-rows-border);
	border-radius: 50%;
	color: var(--modern-rows-text-secondary);
	cursor: pointer;
	transition: all 0.2s ease;
}

.cts-list--modern-rows__info-icon:hover,
.cts-list--modern-rows__info-icon:focus {
	background: var(--modern-rows-link);
	border-color: var(--modern-rows-link);
	color: #ffffff;
	transform: scale(1.1);
}

.cts-list--modern-rows__info-icon:focus-visible {
	outline: 2px solid var(--modern-rows-link);
	outline-offset: 2px;
}

.cts-list--modern-rows__info-icon svg {
	display: block;
	width: 14px;
	height: 14px;
}

/**
 * Popup Container
 */
.cts-list--modern-rows__popup {
	position: absolute;
	top: 100%;
	right: 0;
	margin-top: 0.5rem;
	min-width: 280px;
	max-width: 400px;
	padding: 1rem;
	background: var(--wp--preset--color--base, #ffffff);
	border: 1px solid var(--modern-rows-border);
	border-radius: var(--modern-rows-border-radius);
	box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
	z-index: 1000;
	opacity: 0;
	visibility: hidden;
	transform: translateY(-0.5rem);
	transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s linear 0.2s;
}

/* Show popup when info icon is clicked/active */
.cts-list--modern-rows__info-icon[aria-expanded=\"true\"] ~ .cts-list--modern-rows__popup,
.cts-list--modern-rows__popup:hover {
	opacity: 1;
	visibility: visible;
	transform: translateY(0);
	transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s linear 0s;
}

/* Popup arrow */
.cts-list--modern-rows__popup::before {
	content: '';
	position: absolute;
	top: -6px;
	right: 1.5rem;
	width: 12px;
	height: 12px;
	background: var(--wp--preset--color--base, #ffffff);
	border-left: 1px solid var(--modern-rows-border);
	border-top: 1px solid var(--modern-rows-border);
	transform: rotate(45deg);
}

/**
 * Popup Content
 */
.cts-list--modern-rows__popup-content {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
	font-size: var(--modern-rows-font-size);
	color: var(--modern-rows-text);
}

.cts-list--modern-rows__popup-calendar {
	padding-bottom: 0.5rem;
	border-bottom: 1px solid var(--modern-rows-border);
	font-size: calc(var(--modern-rows-font-size) * 1.05);
	color: var(--calendar-color, var(--modern-rows-link));
}

.cts-list--modern-rows__popup-description {
	line-height: 1.5;
	color: var(--modern-rows-text-secondary);
}

.cts-list--modern-rows__popup-location {
	display: flex;
	align-items: center;
	gap: 0.5rem;
	color: var(--modern-rows-text-secondary);
}

.cts-list--modern-rows__popup-location svg {
	flex-shrink: 0;
	opacity: 0.6;
}

.cts-list--modern-rows__popup-services {
	display: flex;
	flex-direction: column;
	gap: 0.375rem;
}

.cts-list--modern-rows__popup-services strong {
	font-size: calc(var(--modern-rows-font-size) * 0.9);
	color: var(--modern-rows-text);
	text-transform: uppercase;
	letter-spacing: 0.05em;
}

.cts-list--modern-rows__popup-service {
	padding-left: 0.75rem;
	font-size: calc(var(--modern-rows-font-size) * 0.95);
	color: var(--modern-rows-text-secondary);
}

.cts-list--modern-rows__popup-service span {
	opacity: 0.8;
}

.cts-list--modern-rows__popup-tags {
	display: flex;
	flex-wrap: wrap;
	gap: 0.375rem;
}

.cts-list--modern-rows__popup-tag {
	padding: 0.25rem 0.625rem;
	background: var(--modern-rows-hover-bg);
	border-radius: calc(var(--modern-rows-border-radius) / 2);
	font-size: calc(var(--modern-rows-font-size) * 0.875);
	color: var(--modern-rows-text-secondary);
	white-space: nowrap;
}

/* ========================================================================
   Container Queries for Modern Rows View
   ======================================================================== */

/**
 * Very Narrow (<400px): Stack date/time, wrap title
 */
@container cts-list-modern-rows (max-width: 399px) {
	.cts-list--modern-rows__item {
		flex-wrap: wrap;
		gap: 0.375rem;
	}
	
	.cts-list--modern-rows__date,
	.cts-list--modern-rows__time {
		flex-basis: auto;
	}
	
	.cts-list--modern-rows__title {
		flex-basis: 100%;
	}
	
	.cts-list--modern-rows__popup {
		left: 0;
		right: 0;
		min-width: auto;
	}
	
	.cts-list--modern-rows__popup::before {
		right: auto;
		left: 50%;
		transform: translateX(-50%) rotate(45deg);
	}
}

/**
 * Narrow (400-599px): Date/Time together, title wraps if needed
 */
@container cts-list-modern-rows (min-width: 400px) and (max-width: 599px) {
	.cts-list--modern-rows__item {
		flex-wrap: wrap;
	}
	
	.cts-list--modern-rows__title {
		flex-basis: calc(100% - 2rem);
	}
}

/**
 * Wide (≥600px): All in one line if possible
 */
@container cts-list-modern-rows (min-width: 600px) {
	.cts-list--modern-rows__item {
		flex-wrap: nowrap;
	}
	
	.cts-list--modern-rows__title {
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
}

/* ========================================================================
   Media Query Fallback (for browsers without Container Query support)
   ======================================================================== */

@supports not (container-type: inline-size) {
	/* Very Narrow */
	@media (max-width: 399px) {
		.cts-list--modern-rows__item {
			flex-wrap: wrap;
		}
		
		.cts-list--modern-rows__title {
			flex-basis: 100%;
		}
		
		.cts-list--modern-rows__popup {
			left: 0;
			right: 0;
		}
	}
	
	/* Narrow */
	@media (min-width: 400px) and (max-width: 599px) {
		.cts-list--modern-rows__item {
			flex-wrap: wrap;
		}
	}
	
	/* Wide */
	@media (min-width: 600px) {
		.cts-list--modern-rows__title {
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
	}
}

/* ========================================================================
   Print Styles for Modern Rows View
   ======================================================================== */

@media print {
	.cts-list--modern-rows__item {
		break-inside: avoid;
		page-break-inside: avoid;
		border: 1px solid #ddd;
	}
	
	.cts-list--modern-rows__item--clickable:hover,
	.cts-list--modern-rows__item--clickable {
		cursor: default;
	}
	
	.cts-list--modern-rows__info-icon {
		display: none;
	}
	
	.cts-list--modern-rows__popup {
		display: none;
	}
	
	.cts-list--modern-rows__title {
		color: inherit;
		text-decoration: none !important;
	}
}

/* ========================================================================
   Minimal View (Ultra-compact Single-line List for Sidebars)
   ======================================================================== */

/**
 * Container
 */
.cts-list--minimal {
	/* Container Query for responsive behavior */
	container-type: inline-size;
	container-name: cts-list-minimal;
	
	display: flex;
	flex-direction: column;
	gap: clamp(0.5rem, 1.5vw, 0.75rem);
	
	/* Custom Properties */
	--minimal-text: var(--wp--preset--color--contrast, #111827);
	--minimal-text-secondary: var(--wp--preset--color--contrast-3, #6b7280);
	--minimal-border: var(--wp--preset--color--contrast-2, #e5e7eb);
	--minimal-hover-bg: var(--wp--preset--color--contrast-1, #f9fafb);
	--minimal-link: var(--wp--preset--color--primary, #2563eb);
	--minimal-font-size: clamp(0.8125rem, 1.5vw, 0.875rem);
	--minimal-spacing: clamp(0.375rem, 1vw, 0.5rem);
}

/**
 * Month Separator
 */
.cts-list--minimal .cts-list__month-separator {
	margin: 1rem 0 0.5rem;
	padding-bottom: 0.375rem;
	border-bottom: 1px solid var(--minimal-border);
	font-size: clamp(0.875rem, 2vw, 1rem);
	font-weight: 700;
	color: var(--minimal-text);
}

.cts-list--minimal .cts-list__month-separator:first-child {
	margin-top: 0;
}

/**
 * Empty State
 */
.cts-list--minimal .cts-list__empty-state {
	padding: 2rem 1rem;
	text-align: center;
	color: var(--minimal-text-secondary);
	font-size: var(--minimal-font-size);
	background: var(--minimal-hover-bg);
	border-radius: 4px;
}

/**
 * Event Item (Single Line)
 */
.cts-list--minimal__item {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: var(--minimal-spacing);
	padding: var(--minimal-spacing) 0;
	border-bottom: 1px solid var(--minimal-border);
	transition: background-color 0.2s ease;
	font-size: var(--minimal-font-size);
	line-height: 1.4;
}

.cts-list--minimal__item:last-child {
	border-bottom: none;
}

/* Hover effect for clickable items */
.cts-list--minimal__item--clickable {
	cursor: pointer;
	padding: var(--minimal-spacing);
	margin: 0 calc(var(--minimal-spacing) * -1);
	border-bottom-color: transparent;
	border-radius: 4px;
}

.cts-list--minimal__item--clickable:hover,
.cts-list--minimal__item--clickable:focus-visible {
	background: var(--minimal-hover-bg);
}

.cts-list--minimal__item--clickable:focus-visible {
	outline: 2px solid var(--minimal-link);
	outline-offset: 2px;
}

/* Appointment variant */
.cts-list--minimal__item--appointment {
	opacity: 0.9;
}

/**
 * Date
 */
.cts-list--minimal__date {
	flex-shrink: 0;
	font-weight: 600;
	color: var(--minimal-text);
	white-space: nowrap;
	min-width: clamp(50px, 10vw, 60px);
}

/**
 * Time
 */
.cts-list--minimal__time {
	flex-shrink: 0;
	color: var(--minimal-text-secondary);
	white-space: nowrap;
	font-size: calc(var(--minimal-font-size) * 0.95);
}

.cts-list--minimal__time::before {
	content: '•';
	margin-right: 0.375rem;
	color: var(--minimal-border);
}

/**
 * Content (Title + Description)
 */
.cts-list--minimal__content {
	flex: 1 1 auto;
	min-width: 0; /* Prevents flex overflow */
	display: flex;
	flex-wrap: wrap;
	gap: 0.25rem 0.5rem;
	align-items: baseline;
}

/**
 * Title
 */
.cts-list--minimal__title {
	font-weight: 600;
	color: var(--minimal-text);
	word-wrap: break-word;
	hyphens: auto;
}

.cts-list--minimal__item--clickable .cts-list--minimal__title {
	color: var(--minimal-link);
	transition: color 0.2s ease;
}

.cts-list--minimal__item--clickable:hover .cts-list--minimal__title {
	text-decoration: underline;
}

/**
 * Description
 */
.cts-list--minimal__description {
	color: var(--minimal-text-secondary);
	font-size: calc(var(--minimal-font-size) * 0.92);
	word-wrap: break-word;
}

.cts-list--minimal__description::before {
	content: '–';
	margin-right: 0.375rem;
	opacity: 0.5;
}

/* ========================================================================
   Container Queries for Minimal View
   ======================================================================== */

/**
 * Very Narrow (<300px): Stack date/time on separate line
 */
@container cts-list-minimal (max-width: 299px) {
	.cts-list--minimal__item {
		flex-direction: column;
		align-items: flex-start;
		gap: 0.25rem;
	}
	
	.cts-list--minimal__date,
	.cts-list--minimal__time {
		min-width: auto;
	}
	
	.cts-list--minimal__content {
		width: 100%;
	}
}

/**
 * Narrow (300-499px): Date/Time together, content below
 */
@container cts-list-minimal (min-width: 300px) and (max-width: 499px) {
	.cts-list--minimal__item {
		flex-wrap: wrap;
	}
	
	.cts-list--minimal__content {
		flex-basis: 100%;
	}
}

/**
 * Wide (≥500px): All in one line if possible
 */
@container cts-list-minimal (min-width: 500px) {
	.cts-list--minimal__item {
		flex-wrap: nowrap;
	}
	
	.cts-list--minimal__content {
		flex-wrap: nowrap;
	}
	
	.cts-list--minimal__description {
		overflow: hidden;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
}

/* ========================================================================
   Media Query Fallback (for browsers without Container Query support)
   ======================================================================== */

@supports not (container-type: inline-size) {
	/* Very Narrow */
	@media (max-width: 299px) {
		.cts-list--minimal__item {
			flex-direction: column;
			align-items: flex-start;
		}
	}
	
	/* Narrow */
	@media (min-width: 300px) and (max-width: 499px) {
		.cts-list--minimal__content {
			flex-basis: 100%;
		}
	}
	
	/* Wide */
	@media (min-width: 500px) {
		.cts-list--minimal__content {
			flex-wrap: nowrap;
		}
		
		.cts-list--minimal__description {
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
		}
	}
}

/* ========================================================================
   Print Styles for Minimal View
   ======================================================================== */

@media print {
	.cts-list--minimal__item {
		break-inside: avoid;
		page-break-inside: avoid;
		padding: 0.25rem 0;
		border-bottom: 1px solid #ddd;
	}
	
	.cts-list--minimal__item--clickable:hover,
	.cts-list--minimal__item--clickable {
		background: none;
		cursor: default;
	}
	
	.cts-list--minimal__title {
		color: inherit;
		text-decoration: none;
	}
	
	.cts-list--minimal__description {
		display: inline; /* Keep description on same line in print */
	}
	
	.cts-list--minimal__info-icon {
		display: none; /* Hide popup icons in print */
	}
}

/* ========================================================================
   Info Icon & Popup for Minimal View
   ======================================================================== */

/**
 * Info Icon Button
 */
.cts-list--minimal__info-icon {
	flex-shrink: 0;
	width: clamp(20px, 4vw, 24px);
	height: clamp(20px, 4vw, 24px);
	padding: 0;
	margin-left: auto;
	background: transparent;
	border: none;
	color: var(--minimal-text-secondary);
	cursor: pointer;
	border-radius: 50%;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
}

.cts-list--minimal__info-icon:hover,
.cts-list--minimal__info-icon:focus-visible {
	color: var(--minimal-link);
	background: var(--minimal-hover-bg);
	transform: scale(1.1);
}

.cts-list--minimal__info-icon[aria-expanded="true"] {
	color: var(--minimal-link);
	background: var(--minimal-hover-bg);
}

.cts-list--minimal__info-icon svg {
	width: 16px;
	height: 16px;
}

/**
 * Popup Container
 */
.cts-list--minimal__popup {
	position: absolute;
	right: 0;
	top: 100%;
	margin-top: 0.5rem;
	z-index: 1000;
	opacity: 0;
	visibility: hidden;
	transform: translateY(-8px);
	transition: all 0.2s ease;
	pointer-events: none;
}

.cts-list--minimal__info-icon[aria-expanded="true"] + .cts-list--minimal__popup {
	opacity: 1;
	visibility: visible;
	transform: translateY(0);
	pointer-events: auto;
}

.cts-list--minimal__popup-content {
	min-width: clamp(240px, 40vw, 320px);
	max-width: 90vw;
	padding: clamp(0.75rem, 2vw, 1rem);
	background: var(--minimal-hover-bg, #f9fafb);
	border: 1px solid var(--minimal-border);
	border-radius: clamp(6px, 1vw, 8px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
	font-size: var(--minimal-font-size);
	line-height: 1.5;
}

/**
 * Popup Elements
 */
.cts-list--minimal__popup-calendar {
	margin-bottom: 0.5rem;
	padding-bottom: 0.5rem;
	border-bottom: 1px solid var(--minimal-border);
	color: var(--minimal-link);
}

.cts-list--minimal__popup-description {
	margin-bottom: 0.75rem;
	color: var(--minimal-text);
	word-wrap: break-word;
}

.cts-list--minimal__popup-location {
	display: flex;
	align-items: flex-start;
	gap: 0.5rem;
	color: var(--minimal-text-secondary);
	font-size: calc(var(--minimal-font-size) * 0.95);
}

.cts-list--minimal__popup-location svg {
	flex-shrink: 0;
	margin-top: 0.125rem;
}

/* Mobile adjustments */
@container cts-list-minimal (max-width: 499px) {
	.cts-list--minimal__popup {
		left: 0;
		right: 0;
		margin-top: 0.375rem;
	}
	
	.cts-list--minimal__popup-content {
		min-width: 100%;
	}
}

/* Position popup relative to item */
.cts-list--minimal__item {
	position: relative;
}
